### 1. Порты вывода с открытым выходом (сток/коллектор)

**Техническое описание:**
В такой схеме выходной транзистор может только притягивать линию к «земле» (логический 0). Чтобы получить «1», используется внешний или внутренний подтягивающий резистор (pull-up), который поднимает напряжение на линии, когда транзистор закрыт.

* **Характеристики:** Высокое сопротивление в состоянии «1», низкое в состоянии «0».
* **Плюсы:** Возможность объединять несколько выходов (монтажное «И»), работа с разными уровнями напряжения.
* **Минусы:** Медленное нарастание фронта сигнала (из-за резистора), лишнее потребление тока через резистор.

> **Объяснение «для придурка»:** > Представь, что у тебя есть только кнопка, которая замыкает провод на пол (землю). Чтобы на проводе появилось напряжение, когда ты кнопку не жмешь, мы привязываем его к «плюсу» слабенькой резинкой (резистором). Жмешь кнопку — на проводе 0. Отпускаешь — резинка медленно тянет его вверх к 1.

---

### 2. Двунаправленные порты и альтернативные функции

**Техническое описание:**
Двунаправленный порт может работать и на вход, и на выход. Для этого используется управляющий регистр направления (напр. DDR в AVR).

* **Альтернативная функция:** Один и тот же вывод МК может быть обычным «ногодрыгом» (GPIO), а может стать ножкой UART или выходом таймера. Это настраивается в регистрах.
* **Комплементарный каскад:** Это классический Push-Pull (два транзистора), который активно выдает и 0, и 1.

> **Объяснение «для придурка»:** > Ножка процессора — как рот: можно говорить (выход), а можно слушать (вход). А «альтернативная функция» — это когда ты этим же ртом можешь не просто говорить, а, например, свистеть (UART) или петь (ШИМ).

---

### 3-4. Таймеры-счетчики. Режимы и регистр TMOD

**Техническое описание:**
Таймер — это счетчик, который считает импульсы.

* **Режим таймера:** Считает внутренние такты процессора (измеряет время).
* **Режим счетчика:** Считает внешние импульсы на ножке (например, сколько раз нажали кнопку).
* **TMOD (Timer Mode):** Регистр в 8051, где мы выбираем: таймер это или счетчик, и в каком режиме он работает (0, 1, 2 или 3).

> **Объяснение «для придурка»:** > Таймер — это секундомер. Он знает, что «тик» происходит каждую микросекунду. Счетчик — это охранник с кликером, который нажимает кнопку каждый раз, когда в дверь (ножку МК) входит человек.

---

### 5-6. Управление таймерами (TCON) и Режимы (0-3)

**Техническое описание:**
**TCON** — регистр управления. Там лежат биты запуска (TR) и флаги переполнения (TF).
**Режимы:**

* **Режим 0:** 13-битный (древний стандарт).
* **Режим 1:** 16-битный (считает до 65535).
* **Режим 2:** 8-битный с **автоперезагрузкой**. Когда досчитал до конца, сам сбрасывается в начальное значение. Идеально для UART.
* **Режим 3:** Разделяет таймер на два независимых 8-битных счетчика.

> **Объяснение «для придурка»:** > Режим 1 — это большая корзина, куда влезает много цифр. Режим 2 — это как будильник с повтором: прозвенел и сам переставился на то же время.

---

### 7. Настройка на частоту и измерение импульсов

**Техническое описание:**
Чтобы получить нужную частоту, мы вычисляем значение, которое надо записать в таймер, чтобы он переполнился через нужный интервал.

* **Измеритель ширины:** Таймер включается, когда на входе «1», и выключается, когда «0». Число в таймере = длительность.
* **Частотомер:** Считаем количество внешних импульсов за ровно 1 секунду.

> **Объяснение «для придурка»:** > Чтобы узнать, как быстро крутится колесо, можно либо считать, сколько раз оно повернулось за минуту (частотомер), либо замерить, сколько времени занимает один оборот (измеритель ширины).

---

### 8-9. Входной захват (Input Capture), Сравнение (Output Compare) и ШИМ

**Техническое описание:**

* **Input Capture:** Сохраняет текущее значение таймера в момент внешнего события (например, вспышки). Очень точно.
* **Output Compare:** Когда таймер доходит до заданного числа, «ножка» МК сама меняет состояние.
* **ШИМ (PWM):** Широтно-Импульсная Модуляция. Мы быстро-быстро дергаем ножкой. Меняя соотношение времени «включено» и «выключено» (заполнение), мы меняем среднюю мощность (яркость диода или скорость мотора).

> **Объяснение «для придурка»:** > ШИМ — это как быстро-быстро включать и выключать свет в комнате. Если включать на 1 секунду и выключать на 9, будет казаться, что свет горит очень тускло.

---

### 10-12. АЦП (Аналого-цифровой преобразователь)

**Техническое описание:**
Превращает напряжение в число.

* **Характеристики:** Разрядность (8, 10, 12 бит) и скорость выборки.
* **Vref (Опорное напряжение):** Эталон, с которым сравнивается вход. Если Vref = 5В, а АЦП выдал максимум, значит на входе 5В.
* **Типы:**
1. **Параллельные (Flash):** Самые быстрые, но дорогие (куча компараторов).
2. **Посл. приближения (SAR):** Самые частые в МК. Ищут значение «половинным делением» (больше 2.5В? меньше?).



> **Объяснение «для придурка»:** > АЦП — это весы. Разрядность — это точность гирек. А SAR АЦП — это когда ты сначала кладешь гирю 1кг, если много — убираешь и кладешь 500г, и так пока не уравновесишь.

---

### 13. ЦАП (Цифро-аналоговый преобразователь). R-2R

**Техническое описание:**
Превращает число в напряжение.
**Матрица R-2R** — это хитрая схема из резисторов всего двух номиналов, которая позволяет из битов собрать нужное напряжение.

> **Объяснение «для придурка»:** > Это «смеситель» красок. Процессор говорит: «дай мне 70% яркости», и ЦАП выдает на провод 3.5 Вольта.

---

### 14-16. UART и работа в 8051 (SCON)

**Техническое описание:**
UART — последовательный порт (TX/RX).

* **SCON (Serial Control):** Регистр, где мы ставим режим работы и проверяем, пришел ли байт (RI) или ушел ли (TI).
* **Режимы:** Чаще всего используется **Режим 1** (8 бит данных, скорость задается Таймером 1 или 2).

> **Объяснение «для придурка»:** > Это телеграф. Одна буква отправляется по одной ниточке по одному биту за раз. SCON — это панель управления этим телеграфом.

---

### 17-19. Синхронизация и Программирование (JTAG)

**Техническое описание:**

* **Синхронизация:** Кварцевый резонатор дает ритм всей системе.
* **JTAG:** Стандартный интерфейс для отладки и прошивки. Позволяет не просто залить код, но и останавливать процессор на любой строчке.

---

### 20-23. Интерфейс I²C (I2C)

**Техническое описание:**
Шина на двух проводах (**SDA** — данные, **SCL** — такт).

* **Адресация:** 7 бит. Ведущий (Master) говорит: «Эй, устройство №42, слушай меня».
* **Старт/Стоп:** Особые состояния линий, обозначающие начало и конец разговора.
* **Арбитраж:** Если два мастера начали говорить одновременно, они следят за линией. Тот, кто хотел выдать 1, а увидел 0 (от соседа), замолкает.

> **Объяснение «для придурка»:** > I2C — это школьный класс. Учитель (Мастер) называет фамилию ученика (адрес), и только этот ученик отвечает. Все общаются по двум общим проводам.

---

### 24-26. Интерфейс RS-485

**Техническое описание:**
Дифференциальный интерфейс (две линии A и B). Данные — это **разница** напряжений между ними.

* **Плюсы:** Работает на дистанции до 1.2 км, плевать на помехи.
* **Согласование (Терминатор):** Резистор 120 Ом на концах линии, чтобы сигнал не отражался обратно.

> **Объяснение «для придурка»:** > Если в UART мы меряем напряжение относительно земли, то в RS-485 мы смотрим на разницу между двумя проводами. Даже если ударит молния и поднимет напряжение на обоих проводах, разница останется прежней. Это супер-надежно для заводов.

---

### 27. Интерфейс CAN

**Техническое описание:**
Автомобильный стандарт. Основная фишка — **приоритеты**.

* Если две машины (узла) шлют данные, сообщение с более важным ID (меньшее число) «задавит» менее важное без потери данных.

> **Объяснение «для придурка»:** > Это чат, где если «Директор» и «Интерн» начинают писать одновременно, сообщение интерна стирается, а директор проходит первым. Так тормоза в машине всегда важнее, чем радио.

---

### 28-30. Ethernet, LIN, PLC, MIL-STD-1553

* **Industrial Ethernet:** Отличается от домашнего тем, что гарантирует доставку пакета за точное время (Real-time).
* **LIN:** Дешевая и медленная шина для зеркал и стеклоподъемников в авто.
* **PLC (Power Line Communication):** Передача данных прямо по розетке 220В.
* **MIL-STD-1553:** Военный стандарт (самолеты, танки). Две дублирующие шины для надежности. Есть Контроллер, Оконечные устройства и Монитор (черный ящик).

> **Объяснение «для придурка»:** > **PLC** — это когда ты втыкаешь интернет-адаптер в розетку и интернет идет по тем же проводам, что и ток для чайника.
> **MIL-STD-1553** — это как связь в танке: всё трижды продублировано, чтобы если перебьет один провод, система продолжала стрелять.

